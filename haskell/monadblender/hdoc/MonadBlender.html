<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>MonadBlender</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_MonadBlender.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">MonadBlender</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">class</span> <a href="#t:MonadBlender">MonadBlender</a> blender blendingMonad | blender -&gt; blendingMonad <span class="keyword">where</span><ul class="subs"></ul></li><li class="src short"><a href="#v:hBind">hBind</a> :: (Monad baseMonad, Monad blendingMonad, <a href="MonadBlender.html#t:MonadBlender">MonadBlender</a> blender blendingMonad) =&gt; baseMonad a -&gt; (a -&gt; blendingMonad b) -&gt; blender baseMonad b</li><li class="src short"><a href="#v:hLift">hLift</a> :: (Monad baseMonad, Monad blendingMonad, <a href="MonadBlender.html#t:MonadBlender">MonadBlender</a> blender blendingMonad) =&gt; baseMonad a -&gt; blender baseMonad a</li><li class="src short"><a href="#v:hCompose">hCompose</a> :: (Monad baseMonad, Monad blendingMonad, <a href="MonadBlender.html#t:MonadBlender">MonadBlender</a> blender blendingMonad) =&gt; (a -&gt; baseMonad b) -&gt; (b -&gt; blendingMonad c) -&gt; a -&gt; blender baseMonad c</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:State-39-">State'</a> s a = <a href="#v:State-39-">State'</a> {<ul class="subs"><li><a href="#v:runState-39-">runState'</a> :: s -&gt; (a, s)</li></ul>}</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:MonadBlender" class="def">MonadBlender</a> blender blendingMonad | blender -&gt; blendingMonad <span class="keyword">where</span> <a href="#t:MonadBlender" class="selflink">#</a></p><div class="doc"><p>One way to motivate monad transformers is through the ideas of heterogeneous
     bind and heterogeneous monad composition.</p><p>In analogy to regular bind:</p><pre> '&gt;&gt;= :: (m a -&gt; (a -&gt; m b) -&gt; m b)'</pre><p>we can define a heterogeneous bind between two different monads as:</p><pre> 'hBind :: baseMonad a -&gt; (a -&gt; blendingMonad b) -&gt; blender baseMonad b'</pre><p>MonadBlender is a binary type class that relates <em>monad blenders</em> to
    corresponding <em>blending monads</em>, e.g., a maybe blender, to Maybe.
    The blending monad is primitive: it is defined independently of the blender.
    Examples of primitive monads are Maybe, ((-&gt;) a), ((,) a), Either, etc.</p><p>As a data structure, a monad blender is identical to the corresponding
    transformer, and represents two distinct effects: the effect of the
    corresponding blending monad (Maybe in the above example), and the effect of
    some other (generic) monad, called a <em>base monad</em> here.</p><p>But as a type class, <em>MonadBlender</em> is based on the idea of
    <em>heterogeneous bind</em> (<em>hBind</em>), rather than on the idea of <em>lift</em> used
    in the <em>MonadTrans</em> type class.</p><p>In a heterogeneous bind, the type of the monad produced by the binding
    function is known and fixed, but the type of the monad being bound (the
    base monad) is unknown (generic).</p><p>MonadTrans's lift method can be represented generically in terms of
    heterogeneous bind. TODO. The converse remains to be proved or disproved.</p><p>Heterogeneous bind may in turn be used to define the <em>heterogeneous</em>
    <em>composition</em> (<em>hCompose</em>) of two monad-producing functions producing
    different types of monads, just as normal bind can be used to define
    Kleisli composition (&gt;=&gt;).</p><p>Heterogeneous bind itself is implemented by using a <em>heterogeneous join</em>
    (<em>hJoin</em>) function, in the same way that homogeneous bind (&gt;&gt;=)
    can be implemented by using monadic join. Hence, <em>hJoin</em> is the only
    method of the monad blender type class. Other methods
    related to this type class, such as <em>hBind</em>, are stand-alone methods,
    since their implementations in terms of <em>hJoin</em> are fixed.</p><p>Technical note.</p><p>Certain functions related to this type class, e.g., <em>hLift</em>
    (the implementation of MonadTrans's <em>lift</em>), only use the
    base monad and the blender in their signatures, but need the blending
    monad in their implementations. To avoid ambiguity in the choice
    the blending monad in these implementations, a functional dependency
    is added between the blender and the blending monad.</p><p>TODO. Can remove the FP by using a proxy parameter for the blending monad.
    But this is not necessary for our current pedagogical purposes.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="MonadBlender.html#v:hJoin">hJoin</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:hJoin" class="def">hJoin</a> :: (Monad baseMonad, Monad blendingMonad) =&gt; baseMonad (blendingMonad a) -&gt; blender baseMonad a <a href="#v:hJoin" class="selflink">#</a></p><div class="doc"><p>Heterogeneous join: convert a nested data structure: baseMonad (blendingMonad a)
 into a corresponding blender data structure. <em>hJoin</em> is used to implement <em>hBind</em>:</p><pre> baseMonad `<code><a href="MonadBlender.html#v:hBind">hBind</a></code>` blendingMonadFactory = hJoin $ blendingMonadFactory <code>&lt;$&gt;</code> baseMonad</pre><p>Analogous to the implementation of bind via join:</p><pre> monad <code>&gt;&gt;=</code> monadFactory = join $ monadFactory <code>&lt;$&gt;</code> monad</pre><p>In the case of bind, <em>join</em> flattens the nested structure. <em>hBind</em> can't necessarily
 do any flattening. It would just have to do whatever is necessary to convert the
 nested structure to a data structure that naturally represents the effects of both
 baseMonad and blendingMonad, and is itself a monad, capable of propagating the
 two effects together.</p><p>In some cases, no further proper simplification of the nested structure is
 possible or necessary and hJoin just houses the nested data structure in a
 newtype.</p><p>In other cases, further proper processing is necessary. For example, when the
 blending monad is a reader: '(-&gt;) r', the nested structure needs to be
 simplified to 'r -&gt; baseMonad a' to preserve the idea that the combined
 structure represents both the effect of the base monad, and the effect of
 the reader monad as a function from r.</p></div></div><div class="subs instances"><p id="control.i:MonadBlender" class="caption collapser" onclick="toggleSection('i:MonadBlender')">Instances</p><div id="section.i:MonadBlender" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadBlender:MonadBlender:1" class="instance expander" onclick="toggleSection('i:ic:MonadBlender:MonadBlender:1')"></span> <a href="MonadBlender.html#t:MonadBlender">MonadBlender</a> MaybeT Maybe</span> <a href="#t:MonadBlender" class="selflink">#</a></td><td class="doc"><p>Allow any monad to be bound by a Maybe-producing function.
  The bind produces a MaybeT data structure.</p></td></tr><tr><td colspan="2"><div id="section.i:ic:MonadBlender:MonadBlender:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:hJoin">hJoin</a> :: (Monad baseMonad, Monad Maybe) =&gt; baseMonad (Maybe a) -&gt; MaybeT baseMonad a <a href="#v:hJoin" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadBlender:MonadBlender:2" class="instance expander" onclick="toggleSection('i:ic:MonadBlender:MonadBlender:2')"></span> <a href="MonadBlender.html#t:MonadBlender">MonadBlender</a> (ExceptT err) (Either err)</span> <a href="#t:MonadBlender" class="selflink">#</a></td><td class="doc"><p>Allow any monad to be bound by an Either-producing function.
  The bind produces an ExceptT data structure.</p></td></tr><tr><td colspan="2"><div id="section.i:ic:MonadBlender:MonadBlender:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:hJoin">hJoin</a> :: (Monad baseMonad, Monad (Either err)) =&gt; baseMonad (Either err a) -&gt; ExceptT err baseMonad a <a href="#v:hJoin" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadBlender:MonadBlender:3" class="instance expander" onclick="toggleSection('i:ic:MonadBlender:MonadBlender:3')"></span> Monoid w =&gt; <a href="MonadBlender.html#t:MonadBlender">MonadBlender</a> (WriterT w) ((,) w)</span> <a href="#t:MonadBlender" class="selflink">#</a></td><td class="doc"><p>Allow any monad to be bound by a writer- [that is, ((,), w)] producing function.
  The bind produces a WriterT data structure.</p></td></tr><tr><td colspan="2"><div id="section.i:ic:MonadBlender:MonadBlender:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:hJoin">hJoin</a> :: (Monad baseMonad, Monad ((,) w)) =&gt; baseMonad (w, a) -&gt; WriterT w baseMonad a <a href="#v:hJoin" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadBlender:MonadBlender:4" class="instance expander" onclick="toggleSection('i:ic:MonadBlender:MonadBlender:4')"></span> <a href="MonadBlender.html#t:MonadBlender">MonadBlender</a> (StateT s) (<a href="MonadBlender.html#t:State-39-">State'</a> s)</span> <a href="#t:MonadBlender" class="selflink">#</a></td><td class="doc"><p>Allow any monad to be bound by a State'-producing function.
  The bind produces a StateT data structure.</p></td></tr><tr><td colspan="2"><div id="section.i:ic:MonadBlender:MonadBlender:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:hJoin">hJoin</a> :: (Monad baseMonad, Monad (<a href="MonadBlender.html#t:State-39-">State'</a> s)) =&gt; baseMonad (<a href="MonadBlender.html#t:State-39-">State'</a> s a) -&gt; StateT s baseMonad a <a href="#v:hJoin" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadBlender:MonadBlender:5" class="instance expander" onclick="toggleSection('i:ic:MonadBlender:MonadBlender:5')"></span> <a href="MonadBlender.html#t:MonadBlender">MonadBlender</a> (ReaderT * r) ((-&gt;) r)</span> <a href="#t:MonadBlender" class="selflink">#</a></td><td class="doc"><p>Allow any monad to be bound by a reader- [that is, ((-&gt;), r)] producing function.
  The bind produces a ReaderT data structure.</p></td></tr><tr><td colspan="2"><div id="section.i:ic:MonadBlender:MonadBlender:5" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:hJoin">hJoin</a> :: (Monad baseMonad, Monad ((-&gt;) r)) =&gt; baseMonad (r -&gt; a) -&gt; ReaderT * r baseMonad a <a href="#v:hJoin" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:hBind" class="def">hBind</a> :: (Monad baseMonad, Monad blendingMonad, <a href="MonadBlender.html#t:MonadBlender">MonadBlender</a> blender blendingMonad) =&gt; baseMonad a -&gt; (a -&gt; blendingMonad b) -&gt; blender baseMonad b <a href="#v:hBind" class="selflink">#</a></p><div class="doc"><p>Heterogeneous bind: bind a base monad by using a blending monad producer.
   Return a blender corresponding to the blending monad that represents
   both the effect of the base monad, and the effect of the blending monad.</p></div></div><div class="top"><p class="src"><a id="v:hLift" class="def">hLift</a> :: (Monad baseMonad, Monad blendingMonad, <a href="MonadBlender.html#t:MonadBlender">MonadBlender</a> blender blendingMonad) =&gt; baseMonad a -&gt; blender baseMonad a <a href="#v:hLift" class="selflink">#</a></p><div class="doc"><p>Implementation of <em>lift</em> by using heterogeneous bind.</p></div></div><div class="top"><p class="src"><a id="v:hCompose" class="def">hCompose</a> :: (Monad baseMonad, Monad blendingMonad, <a href="MonadBlender.html#t:MonadBlender">MonadBlender</a> blender blendingMonad) =&gt; (a -&gt; baseMonad b) -&gt; (b -&gt; blendingMonad c) -&gt; a -&gt; blender baseMonad c <a href="#v:hCompose" class="selflink">#</a></p><div class="doc"><p>Heterogeneous Kleisli composition - compose two monad producers
   producing monads of different types. Analogous to the implementation
   of Kleisli composition by using homogeneous bind.</p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:State-39-" class="def">State'</a> s a <a href="#t:State-39-" class="selflink">#</a></p><div class="doc"><p>Encapsulation of a stand-alone state monad.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:State-39-" class="def">State'</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:runState-39-" class="def">runState'</a> :: s -&gt; (a, s)</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:State-39-" class="caption collapser" onclick="toggleSection('i:State-39-')">Instances</p><div id="section.i:State-39-" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:State-39-:Monad:1" class="instance expander" onclick="toggleSection('i:id:State-39-:Monad:1')"></span> Monad (<a href="MonadBlender.html#t:State-39-">State'</a> s)</span> <a href="#t:State-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:State-39-:Monad:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="MonadBlender.html#t:State-39-">State'</a> s a -&gt; (a -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s b) -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s b</p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="MonadBlender.html#t:State-39-">State'</a> s a -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s b -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s b</p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s a</p><p class="src"><a href="#v:fail">fail</a> :: String -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s a</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:State-39-:Functor:2" class="instance expander" onclick="toggleSection('i:id:State-39-:Functor:2')"></span> Functor (<a href="MonadBlender.html#t:State-39-">State'</a> s)</span> <a href="#t:State-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:State-39-:Functor:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s a -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s b</p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s b -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s a</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:State-39-:Applicative:3" class="instance expander" onclick="toggleSection('i:id:State-39-:Applicative:3')"></span> Applicative (<a href="MonadBlender.html#t:State-39-">State'</a> s)</span> <a href="#t:State-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:State-39-:Applicative:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s a</p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="MonadBlender.html#t:State-39-">State'</a> s (a -&gt; b) -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s a -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s b</p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="MonadBlender.html#t:State-39-">State'</a> s a -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s b -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s b</p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="MonadBlender.html#t:State-39-">State'</a> s a -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s b -&gt; <a href="MonadBlender.html#t:State-39-">State'</a> s a</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:State-39-:MonadBlender:4" class="instance expander" onclick="toggleSection('i:id:State-39-:MonadBlender:4')"></span> <a href="MonadBlender.html#t:MonadBlender">MonadBlender</a> (StateT s) (<a href="MonadBlender.html#t:State-39-">State'</a> s)</span> <a href="#t:State-39-" class="selflink">#</a></td><td class="doc"><p>Allow any monad to be bound by a State'-producing function.
  The bind produces a StateT data structure.</p></td></tr><tr><td colspan="2"><div id="section.i:id:State-39-:MonadBlender:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:hJoin">hJoin</a> :: (Monad baseMonad, Monad (<a href="MonadBlender.html#t:State-39-">State'</a> s)) =&gt; baseMonad (<a href="MonadBlender.html#t:State-39-">State'</a> s a) -&gt; StateT s baseMonad a <a href="#v:hJoin" class="selflink">#</a></p></div></div></td></tr></table></div></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.2</p></div></body></html>